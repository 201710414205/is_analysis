# 实验2：图书管理系统用例建模

|     学号     |       班级       | 姓名 |
| :----------: | :--------------: | :--: |
| 201710414205 | 2017软件工程二班 | 胡古 |

## 图书管理系统的用例关系图

1.用例图PlantUML源码如下：

```puml
@startuml
left to right direction
skinparam packageStyle rectangle
actor 图书管理员
actor 读者
actor 其他访客
rectangle 图书管理系统{

图书管理员 ---> (借阅图书)
图书管理员---> (归还图书)
图书管理员 ---> (管理书目)
图书管理员 ---> (借阅过期罚款)
图书管理员 --- (维护读者信息)
(维护读者信息)-->(账号密码管理)

(借书)<---:读者:
(还书)<---:读者:
(查询借阅情况)<---:读者:
(密码修改)<---:读者:

(预定图书)<--(借书)
(取消预定)<--(借书)
(帮助)<.(续借)
(查询图书)<--(借书)
(续借)<--(借书)
(过期罚款)<--(还书)

(浏览书目)<---:其他访客:
}
@enduml
```

2.用例图如下：
![1.png](1.png)




## 参与者说明：

1.图书管理员

主要职责是：借书、还书、管理书、过期罚款、维护读者信息等

2.读者

主要包含借书、还书、查询借阅情况、预约书籍四种功能

3.其他访客

浏览数目

## 用例规约表

1.“查询图书”用例

| 用例名称   | 查询图书                                                     |
| ---------- | ------------------------------------------------------------ |
| 参与者     | 图书管理员、读者、其他访客                                   |
| 前置条件   | 图书管理员、读者登陆到系统，访客可不用登陆                   |
| 后置条件   | 图书管理员可以浏览到书目所有借阅信息（包括借阅人、预期归还时间），读者和访客只能看到书籍信息和剩余数量 |
| 主事件流   | 1、管理员或者读者登陆系统（访客不用）  2、输入书籍名称、作者、出版社等查询  3、浏览书籍信息、状态、剩余书籍数量 |
| 备选事件流 | 1a. 读者登陆失败 <br> 1.系统提示错误信息 <br><br>  2a.图书馆没有符合条件的图书<br>  1.提示搜索的数量为0 <br>  2.返回查询首页<br><br>  3a.图书馆的该种可借图书为0<br>  1.提示可借的图书的数量为0 <br> 2.返回查询首页 |

2.“借出图书”用例

| 用例名称   | 借出图书                                                     |
| ---------- | ------------------------------------------------------------ |
| 参与者     | 图书管理员（主要参与者）、读者（次要参与者）                 |
| 前置条件   | 图书管理员已被识别和授权、读者登陆到系统，可借图书数目>0     |
| 后置条件   | 读者借走图书，图书馆馆藏图书减1，该编号的图书状态为借出      |
| 主事件流   | 1、管理员验证读者身份和借书条件 <br> 2、管理员将该书信息输入系统 <br> 3、查询该书状态剩余和可借数量  <br> 4、修改读者借书情况 <br> 5、将书借给读者 <br> 6、修改图书可借数目、借阅累计人数、借阅状态记录 |
| 备选事件流 | 1a.非法读者或读者不符合借阅条件<br> 1.系统提示错误信息并拒绝借书 <br> <b  1b. 读者可借书目已达上限 <br> 1.系统提示错误信息并拒绝借书 <br> <br>3c.读者已预约该图书 <br>1.管理员确认信息 <br>2.删除预定信息 |

- ""借阅图书"活动图代码

  ```puml
  @startuml
  |#white|读者|
  start
  :拥有读书卡;
  :需要借阅的图书;
  |#grey|图书管理员|
  :验证读者信息;
      if(读者是否借阅条件？)then(是)
      :把书信息进行输入;
          if(读者预约了该书籍？)then(是)
              :确认借书;
              :登记借阅情况，修改借阅信息;
              :借书成功;
           end
           else(否)
           :查询书数目和状态;
              if(书籍可借数量>=1？并且可以借出) then(是)
              fork
              :借书给读者;
              fork again
              :增加该书借阅人数;
              fork again
              :修改读者借阅信息;
              fork again
              :修改图书借阅状态和数量;
              end fork
              else(否)
              :书籍不可借;
              endif
          :借阅完成;
      endif
      else(否)
      endif
      :退出系统;
          stop
  @enduml
  ```

- 活动图

  ![2.png](2.png)

```puml

```

3."归还图书"用例

| 用例名称   | 归还图书                                                     |
| ---------- | ------------------------------------------------------------ |
| 参与者     | 图书管理员（主要参与者）、读者（次要参与者）                 |
| 前置条件   | 图书管理员已被识别和授权、读者登陆到系统                     |
| 后置条件   | 图书馆馆藏图书加1，该编号的图书状态为可借                    |
| 主事件流   | 1、管理员验证读者身份和还书条件 <br> 2、管理员将该书信息输入系统 <br> 3、查询该书状态剩余和可借数量  <br> 4、修改读者借书情况 <br> 5、将书借给读者 <br> 6、修改图书可借书目和情况 |
| 备选事件流 | 1a.非法读者或读者没有该次借阅信息<br> 1.系统提示错误信息 <br> <br> 1b. 读者借阅预期 <br> 1.系统提示需要缴纳罚金 <br> <br>1c.读者希望续借书籍 <br>1.管理员确认信息 <br>2.系统跳转到续借页面 |

4."预约图书"用例

| 用例名称   | 预约图书                                                     |
| ---------- | ------------------------------------------------------------ |
| 参与者     | 读者（主要参与者）、图书管理员（次要参与者）                 |
| 前置条件   | 读者、图书管理员已被识别和授权，且该读者现在没有预约同一本书 |
| 后置条件   | 图书馆馆藏图书不变，可借数量减一，该编号的图书状态为已被预约 |
| 主事件流   | 1、读者搜索图书 <br> 2、读者查询书籍剩余数量和状态 <br> 3、读者选择预约图书时间段<br> 4、管理员设置读者可借数量减一，绑定借书情况 <br> |
| 备选事件流 | 1a.没有相应的图书<br> 1.系统提示错误信息并拒绝预约 <br> <br>  2a. 读者可预约书目已达上限 <br> 1.系统提示错误信息并拒绝预约 <br> <br>3a.读者已预约该图书 <br>1.系统拒绝再次预约，返回预约首页 |

5."续借图书"用例

| 用例名称   | 续借图书                                                     |
| ---------- | ------------------------------------------------------------ |
| 参与者     | 读者（主要参与者）、图书管理员（次要参与者）                 |
| 前置条件   | 读者、图书管理员已被识别和授权，该读者已经借阅该书，至今未超时，也未归还 |
| 后置条件   | 图书馆馆藏图书不变，该编号的图书状态为借出，且预期归还时间延后 |
| 主事件流   | 1、查询个人借书状况 <br> 2、读者查询续借书籍编号<br> 3、读者点击续借<br> 4、管理员确认信息 <br>5、系统延期归还时间 |
| 备选事件流 | 1a.非法读者或读者没有借过该书籍<br> 1.系统提示错误信息并拒绝续借 <br> <br>  1b. 读者可续借书目已达上限或者该图书已经续借过一次 <br> 1.系统提示错误信息并拒绝续借 <br> <br>1c.该图书已经超出归还时间，不能续借 <br>1.管理员审核信息<br>2. 读者缴纳罚金<br>3.读者可再次借书<br> <br>4a.读者不知道怎么操作 <br>1.点击help按钮，寻求帮助 |

6."借阅过期罚款"用例

| 用例名称   | 借阅过期罚款                                                 |
| ---------- | ------------------------------------------------------------ |
| 参与者     | 读者（主要参与者）、图书管理员（次要参与者）                 |
| 前置条件   | 读者、图书管理员已被识别和授权，读者逾期还书                 |
| 后置条件   | 图书馆收回图书，该编号的图书状态为可借，读者可再次借阅       |
| 主事件流   | 1、管理员查询读者信息<br> 2、读者归还图书超时且未续借<br> 3、读者缴纳罚金<br> 4、系统登记该次惩罚 <br> |
| 备选事件流 | 2a.读者已还书<br> 1.系统提示已还书，不用罚款 <br> <br>  2b. 读者已经缴纳完成罚金，不需要再次缴纳 <br> 1.系统提示错误信息 <br> <br>2c.该图书已丢失<br>1.管理员审核信息<br>2. 读者按照原价赔偿图书<br>3.读者缴纳过期罚金 |

7."维护读者信息"用例

| 用例名称   | 维护读者信息                                                 |
| ---------- | ------------------------------------------------------------ |
| 参与者     | 图书管理员                                                   |
| 前置条件   | 图书管理员已被识别和授权，读者信息状态正常                   |
| 后置条件   | 读者信息可能发生更改，比如借阅情况、账户密码等               |
| 主事件流   | 1、管理员查询读者信息<br> 2、管理员修改读者信息<br> 3、管理员修改读者借阅信息 <br> |
| 备选事件流 | 1a.管理员登陆失败或者未被识别和授权<br> 1.系统提示错误信息 <br> <br> 2a. 读者密码状态或借阅状态异常 <br> 1.管理员确认信息并汇报上级解决 <br> <br> |

8."取消预约"用例

| 用例名称   | 取消预约                                                     |
| ---------- | ------------------------------------------------------------ |
| 参与者     | 读者（主要） 图书管理员（次要）                              |
| 前置条件   | 读者登陆到系统，且该读者已经预约过该书籍                     |
| 后置条件   | 图书馆馆藏数量不变，书籍编号对应书籍的状态为可借             |
| 主事件流   | 1、管理员查询读者信息<br> 2、读者查询预约列表<br> 3、读者取消预定 <br>4、管理员修改书籍状态和读者借阅情况 |
| 备选事件流 | 1a.非法读者<br> 1.系统提示密码错误，系统返回首页<br><br>2a.读者没有预约过该图书 <br>1.系统提示错误信息 |

9."密码修改"用例

| 用例名称   | 密码修改                                                     |
| ---------- | ------------------------------------------------------------ |
| 参与者     | 读者（主要） 图书管理员（次要）                              |
| 前置条件   | 图书管理员登陆系统，读者登陆系统或者忘记密码                 |
| 后置条件   | 读者密码变更                                                 |
| 主事件流   | 1、读者发起修改密码请求<br> 2、管理员验证身份<br> 3、读者输入新密码 <br>4、管理员变更用户密码 <br> |
| 备选事件流 | 2a.身份验证失败<br> 1.系统提示密码错误，系统返回首页<br> <br> 4a.系统读取新密码失败  <br> 1.系统提示修改密码失败，读者可以重新操作 |


10."管理书目"用例

| 用例名称   | 管理书目                                                     |
| ---------- | ------------------------------------------------------------ |
| 参与者     | 图书管理员                                                   |
| 前置条件   | 图书管理员登陆系统且被授权                                   |
| 后置条件   | 书目状态可能发生变化                                         |
| 主事件流   | 1、管理登陆查询图书或者浏览图书<br> 2、管理员修改图书状态或管理员修改图书库存  <br> |
| 备选事件流 | 1a.管理员登陆失败<br> 1.系统提示密码错误，系统返回首页<br> <br> 2a.管理员修改信息失败  <br> 1.系统提示修改失败，读者可以重新操作 |



## 实验小结：

在这次实验中，首先需要分析图书管理的需求与功能，之后要确定角色的种类，例如图书管理员与读者，再具体对管理员与读者的作用进行划分。

管理员的作用是借阅图书，归还图书与借阅过期进行罚款，维护读者信息。

读者是进行预约图书，徐杰，查询图书，归还图书，交罚款等功能

在这次实验中，我具体分析了每个角色所担任的任务，以及对任务进行较为细致的约束。以及对图书借阅的具体步骤。

通过这次实验，我提升了分析角色需要完成的能力，例如管理员需要做什么，读者需要做什么，还提升了对使用PUML工具的熟练度。
